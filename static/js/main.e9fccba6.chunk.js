(this["webpackJsonpkv-tetris"]=this["webpackJsonpkv-tetris"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){},,function(t,e,r){},function(t,e,r){},function(t,e,r){},function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),o=r(9),i=r.n(o),s=(r(15),r(10)),c=r(7),u=r(2),l=r(3),h=r(5),d=r(4),v=(r(16),r(17),r(18),r(0)),p=function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var t="tetromino-square";return this.props.shapeColor?t+=" ".concat(this.props.shapeColor):this.props.hasBorder?t+=" empty-with-border":t+=" empty",Object(v.jsx)("div",{className:t})}}]),r}(a.a.Component),f=function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"renderBoard",value:function(){for(var t=this.props.board,e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],o=0;o<n.length;++o){var i=n[o];a.push(Object(v.jsx)(p,{shapeColor:i,hasBorder:!this.props.hideBorders},i+o))}e.push(Object(v.jsx)("div",{className:"row",children:a},n.toString()+r))}return e}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"game-board",children:this.renderBoard()})}}]),r}(a.a.Component),m=(r(20),function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"game-stats",children:["Next",Object(v.jsx)(f,{board:this.props.board,rotateValue:0,hideBorders:!0})]})}}]),r}(a.a.Component)),b=(r(21),function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"options",children:[Object(v.jsx)("button",{className:"start-button",onClick:this.props.onStart,children:"Start Game"}),Object(v.jsx)("button",{className:"pause-button",onClick:this.props.onPause,children:"Pause"})]})}}]),r}(a.a.Component)),j=(r(22),function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"score",children:["Score: ",this.props.score]})}}]),r}(a.a.Component)),O={I:[[[1,1,1,1]],[[1],[1],[1],[1]]],J:[[[1,0,0],[1,1,1]],[[1,1],[1,0],[1,0]],[[1,1,1],[0,0,1]],[[0,1],[0,1],[1,1]]],L:[[[1,1,1],[0,0,1]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]],[[1,0],[1,0],[1,1]]],O:[[[1,1],[1,1]]],S:[[[1,0],[1,1],[0,1]],[[0,1,1],[1,1,0]]],T:[[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]],[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]]],Z:[[[1,1,0],[0,1,1]],[[0,1],[1,1],[1,0]]]},g=[0,1,3,6,10],y=function(t){Object(h.a)(r,t);var e=Object(d.a)(r);function r(){var t;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={gameStarted:!1,gameOver:!1,paused:!1,score:0,board:t.createEmptyBoard(),currentRotationIndex:0,rowIndex:0,colIndex:4,currentShape:null,nextShape:null,intervalId:null},t.startGame=function(){var e=t.state.intervalId;null===e&&(e=setInterval((function(){t.state.paused||t.moveCurrentTetrominoDown()}),1e3)),t.setState({gameStarted:!0,gameOver:!1,paused:!1,score:0,currentRotationIndex:0,rowIndex:0,colIndex:4,board:t.createEmptyBoard(),currentShape:t.getRandomTetrominoShape(),nextShape:t.getRandomTetrominoShape(),intervalId:e})},t.togglePause=function(){t.setState({paused:!t.state.paused})},t}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this;document.addEventListener("keydown",(function(e){!t.state.gameStarted||t.state.gameOver||t.state.paused||("ArrowUp"===e.key&&t.rotateCurrentTetromino(),"ArrowDown"===e.key&&t.moveCurrentTetrominoDown(),"ArrowLeft"===e.key&&t.moveCurrentTetrominoLeft(),"ArrowRight"===e.key&&t.moveCurrentTetrominoRight())}))}},{key:"getRandomTetrominoShape",value:function(){return["I","J","L","O","S","T","Z"][Math.floor(7*Math.random())]}},{key:"createEmptyBoard",value:function(){return new Array(20).fill(null).map((function(t){return new Array(10).fill(null)}))}},{key:"isTetrominoSpaceFree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.board;return t.every((function(t){var r=t.col,n=t.row;return r>=0&&r<=9&&n>=0&&n<=19&&null===e[n][r]}))}},{key:"rotateCurrentTetromino",value:function(){var t=this.getCurrentCoordinates(1);this.isTetrominoSpaceFree(t)&&this.setState({currentRotationIndex:this.state.currentRotationIndex+1})}},{key:"finalizeTetrominoPosition",value:function(t){var e,r,n=JSON.parse(JSON.stringify(this.state.board)),a=Object(c.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.row,u=o.col;n[i][u]=this.state.currentShape}}catch(v){a.e(v)}finally{a.f()}var l=this.clearFullRows(n),h=Object(s.a)(l,2);n=h[0],e=h[1];var d=this.isGameOver(n);d&&clearInterval(this.state.intervalId),this.setState({board:n,rowIndex:0,colIndex:4,currentShape:this.state.nextShape,currentRotationIndex:0,nextShape:this.getRandomTetrominoShape(),gameOver:d,intervalId:d?null:this.state.intervalId,score:this.state.score+e})}},{key:"moveCurrentTetrominoDown",value:function(){var t=this.getCurrentCoordinates(),e=t.map((function(t){return{col:t.col,row:t.row+1}}));this.isTetrominoSpaceFree(e)?this.setState({rowIndex:this.state.rowIndex+1}):this.finalizeTetrominoPosition(t)}},{key:"clearFullRows",value:function(t){for(var e=20-(t=t.filter((function(t){return!t.every((function(t){return"string"===typeof t}))}))).length;t.length<20;)t.unshift(new Array(10).fill(null));return[t,g[e]]}},{key:"isGameOver",value:function(t){var e=this.getCurrentCoordinates(0,this.state.nextShape,0,4,0);return!this.isTetrominoSpaceFree(e,t)}},{key:"moveCurrentTetrominoLeft",value:function(){var t=this.getCurrentCoordinates().map((function(t){return{col:t.col-1,row:t.row}}));this.isTetrominoSpaceFree(t)&&this.setState({colIndex:this.state.colIndex-1})}},{key:"moveCurrentTetrominoRight",value:function(){var t=this.getCurrentCoordinates().map((function(t){return{col:t.col+1,row:t.row}}));this.isTetrominoSpaceFree(t)&&this.setState({colIndex:this.state.colIndex+1})}},{key:"getCurrentCoordinates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.currentShape,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.currentRotationIndex,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.state.colIndex,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.state.rowIndex,o=O[e];if("undefined"===typeof o)return[];for(var i=o[(r+t)%o.length],s=[],c=0;c<i.length;++c)for(var u=0;u<i[c].length;++u)i[c][u]&&s.push({col:n+u,row:a+c});return s}},{key:"getBoardContent",value:function(){var t,e=(t=this.state.board,JSON.parse(JSON.stringify(t)));if(this.state.gameStarted&&!this.state.gameOver){var r,n=Object(c.a)(this.getCurrentCoordinates());try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.row,i=a.col;e[o][i]=this.state.currentShape}}catch(s){n.e(s)}finally{n.f()}}return e}},{key:"getNextItemContent",value:function(){var t=new Array(3).fill(null).map((function(t){return new Array(4).fill(0)})),e=this.getCurrentCoordinates(0,this.state.nextShape,0,0,0);if(this.state.gameStarted&&!this.state.gameOver){var r,n=Object(c.a)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.row,i=a.col;t[o][i]=this.state.nextShape}}catch(s){n.e(s)}finally{n.f()}}return t}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("h1",{className:"header",children:["Tetris ",this.state.gameOver?"(Game Over)":""]}),Object(v.jsx)(f,{board:this.getBoardContent()}),Object(v.jsx)(b,{onStart:this.startGame,onPause:this.togglePause}),Object(v.jsx)(m,{board:this.getNextItemContent()}),Object(v.jsx)(j,{score:this.state.score})]})}}]),r}(a.a.Component),x=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,24)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;r(t),n(t),a(t),o(t),i(t)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(y,{})}),document.getElementById("root")),x()}],[[23,1,2]]]);
//# sourceMappingURL=main.e9fccba6.chunk.js.map